<div class="main" id="main">
    <div class="in" id="in">
      <form #SignupForm="ngForm" (submit)="SignupForm.valid && isUniqueEmailAndPhone(i) && editForm(i)"
        *ngFor="let form of formArray;let i=index" class="card-container active">
        <mat-card *ngIf="isActive(i)" class="fm">
  
          <div>
            <div class="form-feilds" id="form-feilds">
              <div>
  
                <mat-form-field>
                  
                  <mat-label>Name</mat-label>
                  <input matInput name="username" [(ngModel)]="form.username" type="username"
                    #usernameInput="ngModel" required username>
                  <mat-error *ngIf="usernameInput.invalid">Please enter a Name</mat-error>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Phone No.</mat-label>
                  <input matInput name="phone" [(ngModel)]="form.phone" #phoneInput="ngModel" type="text"
                    required phone>
                  <mat-error *ngIf="phoneInput.invalid">Please enter a valid phoneNo.</mat-error>
  
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Email ID</mat-label>
                  <input matInput name="email" [(ngModel)]="form.email" type="email" #emailInput="ngModel"
                    required email>
                  <mat-error *ngIf="emailInput.invalid ">Please enter a valid emaill</mat-error>
                  <!-- <mat-error *ngIf="isUniqueEmail()">Please enter a valid emaill</mat-error> -->
                </mat-form-field>
                <div class="">
                  <button mat-stroked-button type="button" (click)="filePicker.click()">Upload Student
                    Application Form</button>
                  <input type="file" #filePicker accept="application/pdf"
                    (change)="onImagePicked($event.target.files)">
                </div>
              </div>
              <div>
                <mat-form-field>
                  <mat-label>College</mat-label>
                  <input type="college" name="college" [(ngModel)]="form.college" matInput
                    placeholder="Password" disabled #passwordInput="ngModel" required>
                  <mat-error *ngIf="passwordInput.invalid">Please enter college Name</mat-error>
                </mat-form-field>
                <mat-form-field class="year-container">
  
                  <mat-label>Year</mat-label>
                  <input matInput name="year" class="year-input" [(ngModel)]="form.year" type="username"
                    required username>
                  <mat-select disableRipple class="year-select" name="year"  [(ngModel)]="form.year"
                    [formControl]="yearsControl" required>
  
                    <mat-option *ngFor="let year of years" [value]="year">
                      {{year}}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="yearsControl.hasError('required')">Please choose an year</mat-error>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>XYZ</mat-label>
                  <input matInput name="username" [(ngModel)]="form.username" type="username"
                    #usernameInput="ngModel" required username>
                  <mat-error *ngIf="usernameInput.invalid">Please enter a xyz</mat-error>
                </mat-form-field>
                <div class="image-preview">
                
                    <a mat-raised-button  color="primary"  *ngIf="form.filename!=null" target="_blank" [href]="form.filename">Download form</a>

                   
                </div>
  
  
              </div>
  
            </div>
  
            <!-- <div class="foot">
              <button class="delete" (click)="removeForm(i)" *ngIf="!flagArray2[i]" class="btn"><i
                  class="fas fa-trash"></i></button>
              
  
            </div> -->
          </div>
        </mat-card>
        <mat-card  *ngIf="!isActive(i)" (click)="setActiveForm(i)" class="fm shadow-none">
          <div class="form-feilds" id="form-feilds">
            <div>
              <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput name="username" [(ngModel)]="form.username" disabled type="username"
                  #usernameInput="ngModel" required username>
                <mat-error *ngIf="usernameInput.invalid">Please enter a xyz</mat-error>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label>Phone No.</mat-label>
                
                <input matInput  disabled name="phone" [(ngModel)]="form.phone" #phoneInput="ngModel" type="text"
                  required phone>
                <mat-error *ngIf="phoneInput.invalid">Please enter a valid phoneNo.</mat-error>
  
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label>Email ID</mat-label>
                <input matInput disabled name="email" [(ngModel)]="form.email" type="email" #emailInput="ngModel"
                  required email>
                <mat-error *ngIf="emailInput.invalid">Please enter a valid emaill</mat-error>
              </mat-form-field>
            </div>
          </div>
        </mat-card>
        <div class="options">
          <!-- <div *ngIf="isActive(i) "  class="add">
            <button color="primary" type="submit"
              [disabled]="!SignupForm.valid || yearsControl.hasError('required')" class="btn">+</button>
          </div> -->
          <div  *ngIf="isActive(i)" class="add">
            <button class="delete" class="btn"><i class="fas fa-pencil-alt"></i></button>
        </div>
          <div  class="add">
            <button class="delete" (click)="removeForm(i)" class="btn"><i class="fas fa-trash"></i></button>
          </div>
         
        </div>
  
        <!-- <div class="add">
          <button class="btn" (click)="addNewform(i)">+</button>
        </div> -->
        <!-- <button  class="alig1 " color="primary" *ngIf="flagArray2[i]" type="submit"
                [disabled]="SignupForm.invalid || yearsControl.hasError('required')">Save And Next</button> -->
      </form>
    </div>
  </div>